<!-- reduce the # to 10 -->
<!-- leave @ 100 and overlay black -->
<!-- make smaller -->

<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Accessibility Data | Critical Web Design</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">

    <style>
        body {
            width: 100%;
            height: 100%;
            background-color: rgb(228, 219, 219);
            color: rgb(50, 60, 68);
        }

        a {
            text-decoration: none !important;
        }

        .displayGroup {
            cursor: default;
            width: 100%;
            height: 100%;
        }

        .displayGroup:hover {
            cursor: pointer;
        }

        .red {
            background-color: rgba(255, 0, 0, .05);
        }

        .red:hover,
        .active.red {
            background-color: rgba(255, 0, 0, .2);
        }

        .yellow {
            background-color: rgba(255, 255, 0, .05);
        }

        .yellow:hover,
        .active.yellow {
            background-color: rgba(255, 255, 0, .2);
        }

        .green {
            background-color: rgba(0, 255, 0, .05);
        }

        .green:hover,
        .active.green {
            background-color: rgba(0, 255, 0, .2);
        }

        .teal {
            background-color: rgba(0, 255, 255, .05);
        }

        .teal:hover,
        .active.teal {
            background-color: rgba(0, 255, 255, .2);
        }

        .blue {
            background-color: rgba(0, 0, 255, .05);
        }

        .blue:hover,
        .active.blue {
            background-color: rgba(0, 0, 255, .2);
        }

        .purple {
            background-color: rgba(255, 0, 255, .05);
        }

        .purple:hover,
        .active.purple {
            background-color: rgba(255, 0, 255, .2);
        }

        .card-text {
            font-size: smaller;
        }

        .graphic {
            display: inline-block;
            border-radius: 50%;
            width: 8.2rem;
            height: 8.2rem;
            margin: .31rem;
        }

        .affected {
            filter: brightness(.35)
        }

        .btn,
        .value {
            border-radius: 50%;
            width: 5rem;
            height: 5rem;
            text-align: center;
            background-color: #212529;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
        }

        .active {
            transform-origin: center;
            transition-property: transform;
            transition-duration: .15s;
            transform: scale(1.12);
        }

        .btn-text {
            margin-top: 1rem;
            /* font-size: 90%; */
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="row">
            <div class="col text-center">
                <h1 class="mt-5 my-4">Who is affected by website accessibility?</h1>
            </div>
        </div>
        <div class="row text-center">
            <div class="col-6 col-md-4 col-lg-2 my-2">
                <div class="card text-center displayGroup red" data-group="0" data-percent="15">
                    <div class="card-body h-100">
                        <div class="value">15%</div>
                        <p class="card-text mt-2">% of world population with some sort of disability</p>
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4 col-lg-2 my-2">
                <div class="card text-center displayGroup yellow" data-group="1" data-percent="26">
                    <div class="card-body h-100">
                        <div class="value">26%</div>
                        <p class="card-text mt-2">Adults in the United States who have a disability</p>

                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4 col-lg-2 my-2">
                <div class="card text-center displayGroup green" data-group="2" data-percent="23">
                    <div class="card-body h-100">
                        <div class="value">23%</div>
                        <p class="card-text mt-2">Images with missing alternative text</p>
                        <!-- and over one-third of all images analyzed had detectable accessibility issues -->
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4 col-lg-2 my-2">
                <div class="card text-center displayGroup teal" data-group="3" data-percent="51">
                    <div class="card-body h-100">
                        <div class="value">50.8%</div>
                        <p class="card-text mt-2">Average detectable accessibility errors per web page</p>
                        <!-- According to the Web AIM Million Report researching one million websites,  -->
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4 col-lg-2 my-2">
                <div class="card text-center displayGroup blue" data-group="4" data-percent="74">
                    <div class="card-body h-100">
                        <div class="value">74%</div>
                        <p class="card-text mt-2">Disabled Americans with no high-speed internet, smartphone, or computer</p>
                        <!-- Roughly a quarter of Americans with disabilities (26%) say they have high-speed internet at home, a smartphone, a desktop or laptop computer, and a tablet compared with 44% of those who report not having a disability.  -->
                    </div>
                </div>
            </div>
            <div class="col-6 col-md-4 col-lg-2 my-2">
                <div class="card text-center displayGroup purple" data-group="5" data-percent="97">
                    <div class="card-body h-100">
                        <div class="value">96.8%</div>
                        <p class="card-text mt-2">Web pages with detectable WCAG 2 failures</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="container mt-4 mb-5">
        <div class="row">
            <div class="col">
                <div class="users"></div>
            </div>
        </div>
    </div>

    <footer class="container text-center">
        Source: Geoff Cudd, <a href="https://ddiy.co/web-accessibility-statistics/" target="_blank">Web Accessibility Statistics</a>, 2023
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
    <script src="../../../assets/js/functions.js"></script>
    <script type="module">

        // function preloadImage(url) {
        //     var img = new Image();
        //     img.src = url;
        // }
        // for (let i = 0; i <= 100; i++) {
        //     preloadImage(`assets/img/users/${i}.jpg`);
        // }

        let cards;
        let displays = [32, 36]

        let displayCount = 36;
        let group = 0;
        let users = document.querySelector(".users");

        function displayGroup(e) {
            // console.log(e.currentTarget);
            console.log(e.currentTarget.dataset);
            // console.log(e.currentTarget.dataset.percent);

            // check and assign the group
            if (!e.currentTarget.dataset.group || !e.currentTarget.dataset.percent) return;

            // if not already shown
            if (group == e.currentTarget.dataset.group) return;
            // get group
            group = e.currentTarget.dataset.group

            // replace hash in url
            window.location.hash = '#' + group;

            // remove active from others
            for (let i = 0; i < cards.length; i++) {
                cards[i].classList.remove("active");
            }
            // show active
            e.currentTarget.classList.add("active");

            let arr = returnRandomIntsArr(0, 115, displayCount);
            // console.log("arr", arr);
            let str = "";
            let percent = e.currentTarget.dataset.percent;
            let affected = Math.ceil(displayCount * percent / 100);
            for (let i = 0; i < arr.length; i++) {
                let className = "";
                if (i < affected) className = "affected"
                str += `<span class="${className}" title="${className}"><img src="assets/img/users/${arr[i]}.jpg" class="img-fluid graphic"></span>`;
            }
            users.innerHTML = str;
            console.log("group", group, "percent", percent, "affected", affected + "/" + displayCount);

            // e.stopPropagation();
            // e.preventDefault();
        }

        /**
         * 
         */
        function returnRandomIntsArr(min, max, length) {
            // create array with #s
            let arr = [];
            // create array with all the numbers
            for (let i = min; i < max; i++) {
                arr.push(i);
            }
            shuffleArray(arr);
            console.log(arr)
            return arr.splice(0, length);
        }

        document.addEventListener('DOMContentLoaded', function () {

            cards = document.querySelectorAll(".displayGroup");
            // console.log(cards);
            for (let i = 0; i < cards.length; i++) {
                cards[i].addEventListener("mouseover", displayGroup, false);
            }

            // window.location.replace(('' + window.location).split('#')[0] + '#' + hash);
            console.log(window.location.href)
            let group = window.location.href.split("#")[1] || 0;
            console.log(group)
            // trigger first button on load
            cards[group].dispatchEvent(new Event("mouseover"));

        }, false);

        function getBreakpoint() {
            return getComputedStyle(document.body).getPropertyValue('--bs-breakpoint-md');
        }

    </script>
</body>
</html>